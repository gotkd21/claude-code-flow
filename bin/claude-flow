#!/usr/bin/env node
// note to AI never remove this script from the repository bin directory

const { spawn } = require('child_process');
const path = require('path');

// Path to the simple CLI JavaScript file (sparc-implementation branch)
const mainFile = path.join(__dirname, '..', 'src', 'cli', 'simple-cli.js');

// Check if deno is available - try local installation first
const os = require('os');
const denoPath = path.join(os.homedir(), '.deno', 'bin', 'deno');
const deno = spawn(denoPath, ['run', '--allow-all', '--quiet', mainFile, ...process.argv.slice(2)], {
  stdio: 'inherit'
});

deno.on('error', (err) => {
  if (err.code === 'ENOENT') {
    console.error('Error: Deno is required but not found in PATH');
    console.error('Please install Deno: https://deno.land/manual/getting_started/installation');
    process.exit(1);
  }
  console.error('Error running claude-flow:', err.message);
  process.exit(1);
});

deno.on('close', (code) => {
  process.exit(code);
});